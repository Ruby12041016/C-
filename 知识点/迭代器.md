# 迭代器（Iterator）详解

迭代器是连接容器和算法的桥梁：

```cpp
#include <iostream>
#include <vector>
#include <list>
#include <set>
#include <iterator>

int main() {
    // 1. 五种迭代器类型
    std::vector<int> vec = {1, 2, 3, 4, 5};
    
    // 输入迭代器：只能读，只能前移
    // 输出迭代器：只能写，只能前移
    // 前向迭代器：可读写，只能前移（forward_list）
    // 双向迭代器：可读写，可前后移（list, set, map）
    // 随机访问迭代器：可读写，可任意跳转（vector, deque, array）
    
    // 2. 获取迭代器
    auto begin = vec.begin();   // 指向第一个元素
    auto end = vec.end();       // 指向最后一个元素之后
    auto rbegin = vec.rbegin(); // 反向开始
    auto rend = vec.rend();     // 反向结束
    
    // 3. 迭代器操作
    auto it = vec.begin();
    
    // 随机访问迭代器支持所有操作
    it = it + 3;      // 跳转到第4个元素
    it = it - 1;      // 后退一个
    std::cout << "vec[3]: " << vec[3] << std::endl;
    std::cout << "it指向: " << *it << std::endl;
    
    // 双向迭代器（如list）只支持++和--
    std::list<int> lst = {1, 2, 3, 4, 5};
    auto lit = lst.begin();
    ++lit;      // OK
    --lit;      // OK
    // lit = lit + 2;  // 错误！list不支持随机访问
    
    // 4. 迭代器辅助函数
    std::vector<int> v = {1, 2, 3, 4, 5};
    
    // advance - 移动迭代器
    auto it2 = v.begin();
    std::advance(it2, 3);  // 前进3步
    std::cout << "advance后: " << *it2 << std::endl;  // 4
    
    // distance - 计算距离
    auto first = v.begin();
    auto last = v.end();
    std::cout << "元素个数: " << std::distance(first, last) << std::endl;
    
    // next/prev - C++11，获取下一个/上一个位置的迭代器
    auto it3 = std::next(v.begin(), 2);  // begin+2
    auto it4 = std::prev(v.end(), 1);    // end-1
    std::cout << "next: " << *it3 << ", prev: " << *it4 << std::endl;
    
    return 0;
}
```

---